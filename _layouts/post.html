---
layout: default
---
<article class="post">
  <div class="post-header">
    <div class="post-nav">
      <a href="/" class="back-link">&#8592; Portfolio</a>
      <a href="/{{ page.collection }}/" class="back-link">&#8592; 목록으로</a>
    </div>
    <h1 class="post-title">{{ page.title }}</h1>
    {% if page.summary %}
    <p class="post-summary">{{ page.summary }}</p>
    {% endif %}
  </div>

  {% if page.locked %}
  <div id="lock-screen" style="text-align:center; padding: 60px 20px;">
    <p style="font-size:1.1rem; margin-bottom:16px;">&#128274; 비밀번호를 입력하세요</p>
    <input id="pw-input" type="password" placeholder="Password" style="padding:8px 12px; font-size:1rem; border-radius:6px; border:1px solid #444; background:#1a1a1a; color:#fff; margin-right:8px;" />
    <button onclick="checkPassword()" style="padding:8px 16px; font-size:1rem; border-radius:6px; background:#58a6ff; color:#fff; border:none; cursor:pointer;">확인</button>
    <p id="pw-error" style="color:#f85149; margin-top:12px; display:none;">비밀번호가 일치하지 않습니다.</p>
  </div>
  <div id="post-content" class="post-content" style="display:none;">
    {{ content }}
  </div>
  <script>
    async function checkPassword() {
      const input = document.getElementById('pw-input').value.trim();
      const msgBuffer = new TextEncoder().encode(input);
      const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
              const res = await fetch('/password.json', {cache: 'no-store'});
      const data = await res.json();
              if (hashHex === data.hash.trim()) {
        document.getElementById('lock-screen').style.display = 'none';
        document.getElementById('post-content').style.display = 'block';
      } else {
        document.getElementById('pw-error').style.display = 'block';
      }
    }
    document.getElementById('pw-input').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') checkPassword();
    });
  </script>
  {% else %}
  <div class="post-content">
    {{ content }}
  </div>
  {% endif %}
</article>
